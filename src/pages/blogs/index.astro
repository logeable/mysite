---
import Layout from "../../layouts/Layout.astro";
import { getBlogsByPublishDateDesc } from "../../utils/blog";

const blogs = await getBlogsByPublishDateDesc();
---

<Layout title="Blog">
  <div class="container">
    <ul>
      {
        blogs.map((blog: any) => (
          <li>
            <h2 class="title">
              <a href={`/blogs/${blog.id}`}>{blog.data.title}</a>
              {blog.data.isAI && <span class="ai-mark">AI</span>}
            </h2>
            <p class="date">{blog.data.publishDate.toLocaleDateString()}</p>
            <p class="description">{blog.data.description}</p>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>

<style lang="scss">
  .container {
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      li {
        margin-bottom: 20px;
        .date {
          font-size: 12px;
          color: #666;
        }
        .description {
          font-size: 14px;
        }
      }
    }
    .title {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
      .ai-mark {
        user-select: none;
        pointer-events: none;
        background-color: #000;
        color: #fff;
        padding: 3px;
        border-radius: 3px;
        font-size: 0.5rem;
      }
    }
    .date {
      font-style: italic;
    }
  }
</style>
